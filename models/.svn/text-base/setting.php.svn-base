<?php
/* SVN FILE:  $Id$ */
/**
 * Short description for file.
 *
 * Long description for file
 *
 * PHP versions 5
 *
 * Licensed under The BSD License
 * Redistributions of files must retain the above copyright notice.
 *
 * @filesource
 * @copyright     Copyright 2007-2009, Felix Ding (http://dingyu.me)
 * @link          http://lonelythinker.org Project LonelyThinker
 * @package       LonelyThinker
 * @author		  $LastChangedBy$
 * @version       $Revision$
 * @modifiedby    $LastChangedBy$
 * @lastmodified  $Date$
 * @license       http://www.opensource.org/licenses/bsd-license.php The BSD License
 */ 
class Setting extends AppModel {

    var $name = 'Setting';
    var $key = 'LT';

    //retrieve configuration data from the DB
    function get()
    {
        // get all settings from db
        $settings = $this->find('all', array('fields'=>array('id','key','value')));

        // if not is array we exit
        if(!is_array($settings)) return;

        // parse each setting
        foreach($settings as $setting)
        {
            // build the array for use later
            $data_array = array(
                        'id' =>    $setting['Setting']['id'],
                        'key' => $setting['Setting']['key'],
                        'value' => $setting['Setting']['value'],
                        'checksum' => md5($setting['Setting']['value']) );

            // write the config
            Configure::write($this->key . '.' . $setting['Setting']['key'], $setting['Setting']['value']);
        }
    }
}
?>